{"version":3,"sources":["webpack:///./openedx/features/course_experience/static/course_experience/js/CourseOutline.js","webpack:///external \"jQuery\"?0cb8************************************************************************"],"names":["CourseOutline","focusable","document","querySelectorAll","forEach","el","addEventListener","event","index","indexOf","target","key","keys","down","preventDefault","Math","min","length","focus","up","max","link","Logger","log","current_url","window","location","href","target_url","currentTarget","expandSection","sectionToggleButton","$toggleButtonChevron","$","children","$contentPanel","getElementById","getAttribute","slideDown","removeClass","addClass","setAttribute","collapseSection","slideUp","accordion","sections","Array","prototype","slice","call","section","classList","contains","isExpanded","stopImmediatePropagation","toggleAllButton","querySelector","toggleAllSpan","extraPaddingClass","toggleAllExpanded","sectionAction","add","innerText","remove"],"mappings":"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","file":"CourseOutline.js","sourcesContent":["/* globals Logger */\n\nimport { keys } from 'edx-ui-toolkit/js/utils/constants';\n\n// @TODO: Figure out how to make webpack handle default exports when libraryTarget: 'window'\nexport class CourseOutline {  // eslint-disable-line import/prefer-default-export\n  constructor() {\n    const focusable = [...document.querySelectorAll('.outline-item.focusable')];\n\n    focusable.forEach(el => el.addEventListener('keydown', (event) => {\n      const index = focusable.indexOf(event.target);\n\n      switch (event.key) {  // eslint-disable-line default-case\n        case keys.down:\n          event.preventDefault();\n          focusable[Math.min(index + 1, focusable.length - 1)].focus();\n          break;\n        case keys.up:  // @TODO: Get these from the UI Toolkit\n          event.preventDefault();\n          focusable[Math.max(index - 1, 0)].focus();\n          break;\n      }\n    }));\n\n    [...document.querySelectorAll('a:not([href^=\"#\"])')]\n      .forEach(link => link.addEventListener('click', (event) => {\n        Logger.log(\n          'edx.ui.lms.link_clicked',\n          {\n            current_url: window.location.href,\n            target_url: event.currentTarget.href,\n          },\n        );\n      }),\n    );\n\n    function expandSection(sectionToggleButton) {\n      const $toggleButtonChevron = $(sectionToggleButton).children('.fa-chevron-right');\n      const $contentPanel = $(document.getElementById(sectionToggleButton.getAttribute('aria-controls')));\n\n      $contentPanel.slideDown();\n      $contentPanel.removeClass('is-hidden');\n      $toggleButtonChevron.addClass('fa-rotate-90');\n      sectionToggleButton.setAttribute('aria-expanded', 'true');\n    }\n\n    function collapseSection(sectionToggleButton) {\n      const $toggleButtonChevron = $(sectionToggleButton).children('.fa-chevron-right');\n      const $contentPanel = $(document.getElementById(sectionToggleButton.getAttribute('aria-controls')));\n\n      $contentPanel.slideUp();\n      $contentPanel.addClass('is-hidden');\n      $toggleButtonChevron.removeClass('fa-rotate-90');\n      sectionToggleButton.setAttribute('aria-expanded', 'false');\n    }\n\n    [...document.querySelectorAll(('.accordion'))]\n      .forEach((accordion) => {\n        const sections = Array.prototype.slice.call(accordion.querySelectorAll('.accordion-trigger'));\n\n        sections.forEach(section => section.addEventListener('click', (event) => {\n          const sectionToggleButton = event.currentTarget;\n          if (sectionToggleButton.classList.contains('accordion-trigger')) {\n            const isExpanded = sectionToggleButton.getAttribute('aria-expanded') === 'true';\n            if (!isExpanded) {\n              expandSection(sectionToggleButton);\n            } else if (isExpanded) {\n              collapseSection(sectionToggleButton);\n            }\n            event.stopImmediatePropagation();\n          }\n        }));\n      });\n\n    const toggleAllButton = document.querySelector('#expand-collapse-outline-all-button');\n    const toggleAllSpan = document.querySelector('#expand-collapse-outline-all-span');\n    const extraPaddingClass = 'expand-collapse-outline-all-extra-padding';\n    toggleAllButton.addEventListener('click', (event) => {\n      const toggleAllExpanded = toggleAllButton.getAttribute('aria-expanded') === 'true';\n      let sectionAction;\n      if (toggleAllExpanded) {\n        toggleAllButton.setAttribute('aria-expanded', 'false');\n        sectionAction = collapseSection;\n        toggleAllSpan.classList.add(extraPaddingClass);\n        toggleAllSpan.innerText = 'Expand All';\n      } else {\n        toggleAllButton.setAttribute('aria-expanded', 'true');\n        sectionAction = expandSection;\n        toggleAllSpan.classList.remove(extraPaddingClass);\n        toggleAllSpan.innerText = 'Collapse All';\n      }\n      const sections = Array.prototype.slice.call(document.querySelectorAll('.accordion-trigger'));\n      sections.forEach((sectionToggleButton) => {\n        sectionAction(sectionToggleButton);\n      });\n      event.stopImmediatePropagation();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./openedx/features/course_experience/static/course_experience/js/CourseOutline.js","(function() { module.exports = window[\"jQuery\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 3 4 5 6 9 10 11 13 14 15 16 17 18 19 20 21 23 24 25 26 27 28 29 30 31 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 84"],"sourceRoot":""}